<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Map of Hunza</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-easyprint/dist/easyprint.css" />
    <style>
        body, html {
            height: 100%;
            margin: 0;
        }
        #map-container {
            display: flex;
            height: 100%;
        }
        #map {
            flex-grow: 1;
            height: 100vh;
        }
        .right-sidebar {
            width: 250px;
            padding: 20px;
            background-color: #f8f9fa;
            overflow-y: auto;
            box-sizing: border-box;
        }
        .checkbox-container, .button-container {
            margin-top: 20px;
        }
        .checkbox-container label, .button-container button {
            display: block;
            padding: 5px;
            cursor: pointer;
            border: 1px solid #ddd;
            background: #fff;
            margin-bottom: 5px;
        }
        .checkbox-container label:hover, .button-container button:hover {
            background: #e9ecef;
        }
        .print-button {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        @media (max-width: 768px) {
            .right-sidebar {
                width: 100%;
                height: auto;
                position: absolute;
                bottom: 0;
                z-index: 1000;
            }
            #map {
                height: calc(100vh - 200px);
            }
        }
        .sub-checkbox {
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <div id="map-container">
        <div id="map"></div>
        <div class="right-sidebar">
            <div class="checkbox-container">
                <label><input type="checkbox" id="boundaryCheckbox" checked> Boundary</label>
                <label><input type="checkbox" id="hotelCheckbox" checked> Hotels</label>
                <label> Roads</label>
                <div class="sub-checkbox">
                    <label><input type="checkbox" id="highwaysCheckbox" checked> Highways</label>
                    <label><input type="checkbox" id="linkRoadsCheckbox" checked> Link Roads</label>
                    <label><input type="checkbox" id="pathsCheckbox" checked> Paths</label>
                    <label><input type="checkbox" id="residentRoadsCheckbox" checked> Residential Roads</label>
                </div>
                <label><input type="checkbox" id="touristPointsCheckbox" checked> Tourist Points</label>
                <label><input type="checkbox" id="villagesCheckbox" checked> Villages</label>
                <label><input type="checkbox" id="passesCheckbox"> Passes</label>
                <label><input type="checkbox" id="tracksCheckbox"> Tracks</label>
                <label><input type="checkbox" id="glaciersCheckbox"> Glaciers</label>
            </div>
            <div class="button-container">
                <button class="print-button" onclick="printMap()">Print Map</button>
                <button onclick="resetZoom()">Reset Zoom</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-ajax/dist/leaflet.ajax.min.js"></script>
    <script src="https://unpkg.com/leaflet-easyprint/dist/bundle.js"></script>
    <script>
        var map = L.map('map').setView([36.3167, 74.6500], 9);
        
        // Add base layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Define custom icons using the names of the GeoJSON files
        var icons = {
            hotels: L.icon({ iconUrl: 'icons/hotel.png', iconSize: [15, 15] }),
            touristpoints: L.icon({ iconUrl: 'icons/touristpoint.png', iconSize: [15, 15] }),
            passes: L.icon({ iconUrl: 'icons/passes.png', iconSize: [25, 25] }),
            glaciers: L.icon({ iconUrl: 'icons/glacier.png', iconSize: [15, 15] }),
            villages: L.icon({ iconUrl: 'icons/village.png', iconSize: [15, 15] })
            // Add other icons as needed
        };

        // Modify pointToLayer function to use the appropriate icon
        function pointToLayer(feature, latlng, layerType) {
            return L.marker(latlng, { icon: icons[layerType] });
        }

        // Define and load layers with custom icons
        var boundaryLayer = L.geoJSON.ajax('boundary.geojson').addTo(map);
        var hotelsLayer = L.geoJSON.ajax('hotels.geojson', {
            pointToLayer: function(feature, latlng) {
                return pointToLayer(feature, latlng, 'hotels');
            }
        }).addTo(map);
        var touristPointsLayer = L.geoJSON.ajax('touristpoints.geojson', {
            pointToLayer: function(feature, latlng) {
                return pointToLayer(feature, latlng, 'touristpoints');
            }
        }).addTo(map);
        var passesLayer = L.geoJSON.ajax('passes.geojson', {
            pointToLayer: function(feature, latlng) {
                return pointToLayer(feature, latlng, 'passes');
            }
        }).addTo(map);
        var glaciersLayer = L.geoJSON.ajax('glaciers.geojson', {
            pointToLayer: function(feature, latlng) {
                return pointToLayer(feature, latlng, 'glaciers');
            }
        }).addTo(map);

        // Define and load road layers (with color styling)
        var highwaysLayer = L.geoJSON.ajax('highways.geojson', {style: {color: 'blue'}}).addTo(map);
        var linkRoadsLayer = L.geoJSON.ajax('linkroads.geojson', {style: {color: 'green'}}).addTo(map);
        var pathsLayer = L.geoJSON.ajax('paths.geojson', {style: {color: 'orange'}}).addTo(map);
        var residentRoadsLayer = L.geoJSON.ajax('residentroads.geojson', {style: {color: 'red'}}).addTo(map);

        var villagesLayer = L.geoJSON.ajax('villages.geojson', {
            pointToLayer: function(feature, latlng) {
                return pointToLayer(feature, latlng, 'villages');
            }
        }).addTo(map);
        var tracksLayer = L.geoJSON.ajax('tracks.geojson', {style: {color: 'gray'}}).addTo(map);

        // Functions to update layer visibility
        function toggleLayer(checkboxId, layer) {
            var checkbox = document.getElementById(checkboxId);
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    layer.addTo(map);
                } else {
                    map.removeLayer(layer);
                }
            });
        }

        // Toggle layers based on checkboxes
        toggleLayer('boundaryCheckbox', boundaryLayer);
        toggleLayer('hotelCheckbox', hotelsLayer);
        toggleLayer('highwaysCheckbox', highwaysLayer);
        toggleLayer('linkRoadsCheckbox', linkRoadsLayer);
        toggleLayer('pathsCheckbox', pathsLayer);
        toggleLayer('residentRoadsCheckbox', residentRoadsLayer);
        toggleLayer('touristPointsCheckbox', touristPointsLayer);
        toggleLayer('villagesCheckbox', villagesLayer);
        toggleLayer('passesCheckbox', passesLayer);
        toggleLayer('tracksCheckbox', tracksLayer);
        toggleLayer('glaciersCheckbox', glaciersLayer);

        // Print map function
        function printMap() {
            var printPlugin = L.easyPrint({
                sizeModes: ['Current', 'A4Landscape', 'A4Portrait'],
                filename: 'Hunza_map',
                exportOnly: true,
                hideControlContainer: true
            }).addTo(map);
            printPlugin.printMap('CurrentSize', 'Hunza_map');
        }

        // Reset zoom function
        function resetZoom() {
            map.setView([36.3167, 74.6500], 9);
        }
    </script>
</body>
</html>